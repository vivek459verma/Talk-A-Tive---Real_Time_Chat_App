"use strict";(self.webpackChunkchat=self.webpackChunkchat||[]).push([[445],{40679:(e,t,r)=>{r.d(t,{A:()=>j});r(65043);var n=r(46946),i=r(69160),s=r(74600),a=r(81045),o=r(85865),c=r(34535),l=r(26240),d=r(90310),p=r(79456),h=r(20765),x=r(70579);const u=(0,c.Ay)(n.A)((e=>{let{theme:t}=e;return{"&:hover":{cursor:"pointer"}}})),g=(0,c.Ay)(i.A)((e=>{let{theme:t}=e;return{"& .MuiBadge-badge":{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(t.palette.background.paper),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}})),j=e=>{let{img:t,name:r,msg:n,time:c,unread:j,online:A,id:m}=e;const b=(0,p.wA)(),{room_id:w}=(0,p.d4)((e=>e.app)),f=null===w||void 0===w?void 0:w.toString();let v=+f===m;f||(v=!1);const k=(0,l.A)();return(0,x.jsx)(u,{onClick:()=>{b((0,h.s0)({room_id:m}))},sx:{width:"100%",borderRadius:1,backgroundColor:v?"light"===k.palette.mode?(0,d.X4)(k.palette.primary.main,.5):k.palette.primary.main:"light"===k.palette.mode?"#fff":k.palette.background.paper},p:2,children:(0,x.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,x.jsxs)(s.A,{direction:"row",spacing:2,children:[" ",A?(0,x.jsx)(g,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",children:(0,x.jsx)(a.A,{alt:r,src:t})}):(0,x.jsx)(a.A,{alt:r,src:t}),(0,x.jsxs)(s.A,{spacing:.3,children:[(0,x.jsx)(o.A,{variant:"subtitle2",children:r}),(0,x.jsx)(o.A,{variant:"caption",children:(C=n,y=20,(null===C||void 0===C?void 0:C.length)>y?"".concat(null===C||void 0===C?void 0:C.slice(0,y),"..."):C)})]})]}),(0,x.jsxs)(s.A,{spacing:2,alignItems:"center",children:[(0,x.jsx)(o.A,{sx:{fontWeight:600},variant:"caption",children:c}),(0,x.jsx)(i.A,{className:"unread-count",color:"primary",badgeContent:j})]})]})});var C,y}},37930:(e,t,r)=>{r.d(t,{vj:()=>s,lh:()=>a,Xg:()=>c});var n=r(34535),i=r(90310);const s=(0,n.Ay)("div")((e=>{let{theme:t}=e;return{position:"relative",borderRadius:20,backgroundColor:(0,i.X4)(t.palette.background.paper,1),marginRight:t.spacing(2),marginLeft:0,width:"100%"}})),a=(0,n.Ay)("div")((e=>{let{theme:t}=e;return{padding:t.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}}));var o=r(25673);const c=(0,n.Ay)(o.Ay)((e=>{let{theme:t}=e;return{color:"inherit","& .MuiInputBase-input":{padding:t.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(t.spacing(4),")"),width:"100%"}}}))},48445:(e,t,r)=>{r.r(t),r.d(t,{default:()=>D});var n=r(65043),i=r(46946),s=r(74600),a=r(85865),o=r(17392),c=r(53404),l=r(39336),d=r(4122),p=r(46215),h=r(68365),x=r(48765),u=r(26240),g=r(14395),j=r(689),A=r(68399),m=r(70579);const b=()=>{const e=(0,u.A)(),[t,r]=n.useState(0);return(0,m.jsx)(i.A,{sx:{zIndex:10,position:"absolute",bottom:0,width:"100vw",backgroundColor:e.palette.background.paper,boxShadow:"0px 0px 2px rgba(0, 0, 0, 0.25)"},children:(0,m.jsxs)(s.A,{sx:{width:"100%"},direction:"row",alignItems:"center",justifyContent:"space-between",spacing:2,p:2,children:[A.Ok.map((n=>n.index===t?(0,m.jsx)(i.A,{sx:{backgroundColor:e.palette.primary.main,borderRadius:1.5},p:1,children:(0,m.jsx)(o.A,{sx:{width:"max-content",color:"#ffffff"},children:n.icon})}):(0,m.jsx)(o.A,{onClick:()=>{var e;e=n.index,r(e)},sx:{width:"max-content",color:"light"===e.palette.mode?"#080707":e.palette.text.primary},children:n.icon}))),(0,m.jsx)(j.A,{})]})})};var w=r(40679),f=r(37930),v=r(24836),k=r(90035),C=r(16704),y=r(24056),I=r(35316),_=r(79456),R=r(20765),F=r(69160),S=r(81045),q=r(34535),E=r(93932),N=r(28243);const z=window.localStorage.getItem("user_id"),O=(0,q.Ay)(i.A)((e=>{let{theme:t}=e;return{"&:hover":{cursor:"pointer"}}})),M=(0,q.Ay)(F.A)((e=>{let{theme:t}=e;return{"& .MuiBadge-badge":{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(t.palette.background.paper),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}})),W=e=>{let{img:t,firstName:r,lastName:n,online:i,_id:o}=e;const l=(0,u.A)(),d="".concat(r," ").concat(n);return(0,m.jsx)(O,{sx:{width:"100%",borderRadius:1,backgroundColor:l.palette.background.paper},p:2,children:(0,m.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,m.jsxs)(s.A,{direction:"row",alignItems:"center",spacing:2,children:[" ",i?(0,m.jsx)(M,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",children:(0,m.jsx)(S.A,{alt:d,src:t})}):(0,m.jsx)(S.A,{alt:d,src:t}),(0,m.jsx)(s.A,{spacing:.3,children:(0,m.jsx)(a.A,{variant:"subtitle2",children:d})})]}),(0,m.jsx)(s.A,{direction:"row",spacing:2,alignItems:"center",children:(0,m.jsx)(c.A,{onClick:()=>{N.s.emit("friend_request",{to:o,from:z},(()=>{alert("request sent")}))},children:"Send Request"})})]})})},X=e=>{let{img:t,firstName:r,lastName:n,incoming:i,missed:o,online:l,id:d}=e;const p=(0,u.A)(),h="".concat(r," ").concat(n);return(0,m.jsx)(O,{sx:{width:"100%",borderRadius:1,backgroundColor:p.palette.background.paper},p:2,children:(0,m.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,m.jsxs)(s.A,{direction:"row",alignItems:"center",spacing:2,children:[" ",l?(0,m.jsx)(M,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",children:(0,m.jsx)(S.A,{alt:h,src:t})}):(0,m.jsx)(S.A,{alt:h,src:t}),(0,m.jsx)(s.A,{spacing:.3,children:(0,m.jsx)(a.A,{variant:"subtitle2",children:h})})]}),(0,m.jsx)(s.A,{direction:"row",spacing:2,alignItems:"center",children:(0,m.jsx)(c.A,{onClick:()=>{N.s.emit("accept_request",{request_id:d})},children:"Accept Request"})})]})})},B=e=>{let{img:t,firstName:r,lastName:n,incoming:i,missed:c,online:l,_id:d}=e;const p=(0,u.A)(),h="".concat(r," ").concat(n);return(0,m.jsx)(O,{sx:{width:"100%",borderRadius:1,backgroundColor:p.palette.background.paper},p:2,children:(0,m.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,m.jsxs)(s.A,{direction:"row",alignItems:"center",spacing:2,children:[" ",l?(0,m.jsx)(M,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",children:(0,m.jsx)(S.A,{alt:h,src:t})}):(0,m.jsx)(S.A,{alt:h,src:t}),(0,m.jsx)(s.A,{spacing:.3,children:(0,m.jsx)(a.A,{variant:"subtitle2",children:h})})]}),(0,m.jsx)(s.A,{direction:"row",spacing:2,alignItems:"center",children:(0,m.jsx)(o.A,{onClick:()=>{N.s.emit("start_conversation",{to:d,from:z})},children:(0,m.jsx)(E.A,{})})})]})})},L=n.forwardRef((function(e,t){return(0,m.jsx)(v.A,{direction:"up",ref:t,...e})})),G=()=>{const e=(0,_.wA)(),{users:t}=(0,_.d4)((e=>e.app));return(0,n.useEffect)((()=>{e((0,R.dK)())}),[]),(0,m.jsx)(m.Fragment,{children:t.map(((e,t)=>(0,m.jsx)(W,{...e},t)))})},H=()=>{const e=(0,_.wA)(),{friends:t}=(0,_.d4)((e=>e.app));return(0,n.useEffect)((()=>{e((0,R._i)())}),[]),(0,m.jsx)(m.Fragment,{children:t.map(((e,t)=>(0,m.jsx)(B,{...e},t)))})},K=()=>{const e=(0,_.wA)(),{friendRequests:t}=(0,_.d4)((e=>e.app));return(0,n.useEffect)((()=>{e((0,R.pg)())}),[]),(0,m.jsx)(m.Fragment,{children:t.map(((e,t)=>(0,m.jsx)(X,{...e.sender,id:e._id},t)))})},P=e=>{let{open:t,handleClose:r}=e;const[i,a]=n.useState(0);return(0,m.jsxs)(k.A,{fullWidth:!0,maxWidth:"xs",open:t,TransitionComponent:L,keepMounted:!0,onClose:r,"aria-describedby":"alert-dialog-slide-description",sx:{p:4},children:[(0,m.jsx)(s.A,{p:2,sx:{width:"100%"},children:(0,m.jsxs)(C.A,{value:i,onChange:(e,t)=>{a(t)},centered:!0,children:[(0,m.jsx)(y.A,{label:"Explore"}),(0,m.jsx)(y.A,{label:"Friends"}),(0,m.jsx)(y.A,{label:"Requests"})]})}),(0,m.jsx)(I.A,{children:(0,m.jsx)(s.A,{sx:{height:"100%"},children:(0,m.jsx)(s.A,{spacing:2.4,children:(()=>{switch(i){case 0:return(0,m.jsx)(G,{});case 1:return(0,m.jsx)(H,{});case 2:return(0,m.jsx)(K,{})}})()})})})]})};var T=r(61358);const Y=window.localStorage.getItem("user_id"),D=()=>{const e=(0,u.A)(),t=(0,g.A)("up","md"),r=(0,_.wA)(),[j,A]=(0,n.useState)(!1),{conversations:v}=(0,_.d4)((e=>e.conversation.direct_chat));(0,n.useEffect)((()=>{N.s.emit("get_direct_conversations",{user_id:Y},(e=>{console.log(e),r((0,T.Wt)({conversations:e}))}))}),[r]);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(i.A,{sx:{position:"relative",height:"100%",width:t?320:"100vw",backgroundColor:"light"===e.palette.mode?"#F8FAFF":e.palette.background,boxShadow:"0px 0px 2px rgba(0, 0, 0, 0.25)"},children:[!t&&(0,m.jsx)(b,{}),(0,m.jsxs)(s.A,{p:3,spacing:2,sx:{maxHeight:"100vh"},children:[(0,m.jsxs)(s.A,{alignItems:"center",justifyContent:"space-between",direction:"row",children:[(0,m.jsx)(a.A,{variant:"h5",children:"Chats"}),(0,m.jsxs)(s.A,{direction:"row",alignItems:"center",spacing:1,children:[(0,m.jsx)(o.A,{onClick:()=>{A(!0)},sx:{width:"max-content"},children:(0,m.jsx)(d.A,{})}),(0,m.jsx)(o.A,{sx:{width:"max-content"},children:(0,m.jsx)(p.A,{})})]})]}),(0,m.jsx)(s.A,{sx:{width:"100%"},children:(0,m.jsxs)(f.vj,{children:[(0,m.jsx)(f.lh,{children:(0,m.jsx)(h.A,{color:"#709CE6"})}),(0,m.jsx)(f.Xg,{placeholder:"Search\u2026",inputProps:{"aria-label":"search"}})]})}),(0,m.jsxs)(s.A,{spacing:1,children:[(0,m.jsxs)(s.A,{direction:"row",spacing:1.5,alignItems:"center",children:[(0,m.jsx)(x.A,{size:24}),(0,m.jsx)(c.A,{variant:"text",children:"Archive"})]}),(0,m.jsx)(l.A,{})]}),(0,m.jsx)(s.A,{sx:{flexGrow:1,height:"100%",overflowY:"scroll","::-webkit-scrollbar":{width:"1.5px"},"::-webkit-scrollbar-track ":{background:"light"===e.palette.mode?"#F8FAFF":e.palette.background.paper}," ::-webkit-scrollbar-thumb ":{background:"#888"},"::-webkit-scrollbar-thumb:hover":{background:"#555"}},children:(0,m.jsxs)(s.A,{spacing:2.4,children:[(0,m.jsx)(a.A,{variant:"subtitle2",sx:{color:"#676667"},children:"All Chats"}),v.filter((e=>!e.pinned)).map(((e,t)=>(0,m.jsx)(w.A,{...e})))]})})]})]}),j&&(0,m.jsx)(P,{open:j,handleClose:()=>{A(!1)}})]})}}}]);
//# sourceMappingURL=445.5be87a13.chunk.js.map